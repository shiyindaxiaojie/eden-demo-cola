<?xml version="1.0"?>
<!DOCTYPE module PUBLIC
	"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN"
	"https://checkstyle.org/dtds/configuration_1_3.dtd">

<!--
	Checkstyle 配置文件
	用于检查 Java 代码规范，包括 Javadoc 注释
-->
<module name="Checker">
	<property name="charset" value="UTF-8"/>
	<property name="severity" value="warning"/>
	<property name="fileExtensions" value="java"/>

	<!-- 文件长度检查 -->
	<module name="FileLength">
		<property name="max" value="2000"/>
	</module>

	<!-- 行尾空格检查 -->
	<module name="RegexpSingleline">
		<property name="format" value="\s+$"/>
		<property name="minimum" value="0"/>
		<property name="maximum" value="0"/>
		<property name="message" value="行尾不允许有空格"/>
	</module>

	<module name="TreeWalker">
		<!-- ==================== Javadoc 注释检查 ==================== -->
		
		<!-- 类/接口的 Javadoc 注释 -->
		<module name="JavadocType">
			<property name="scope" value="public"/>
			<property name="allowMissingParamTags" value="true"/>
			<message key="javadoc.missing" value="类/接口缺少 Javadoc 注释"/>
		</module>

		<!-- 方法的 Javadoc 注释 -->
		<module name="JavadocMethod">
			<property name="scope" value="public"/>
			<property name="allowMissingParamTags" value="true"/>
			<property name="allowMissingReturnTag" value="true"/>
			<property name="allowedAnnotations" value="Override, Test, Bean, PostConstruct, PreDestroy, EventListener, Async, Scheduled, ExceptionHandler"/>
			<message key="javadoc.missing" value="方法缺少 Javadoc 注释"/>
		</module>

		<!-- Javadoc 格式检查 -->
		<module name="JavadocStyle">
			<property name="checkFirstSentence" value="false"/>
			<property name="checkEmptyJavadoc" value="true"/>
			<property name="checkHtml" value="false"/>
		</module>

		<!-- ==================== 命名规范检查 ==================== -->
		
		<!-- 包名检查 -->
		<module name="PackageName">
			<property name="format" value="^[a-z]+(\.[a-z][a-z0-9]*)*$"/>
			<message key="name.invalidPattern" value="包名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- 类名检查 -->
		<module name="TypeName">
			<property name="format" value="^[A-Z][a-zA-Z0-9]*$"/>
			<message key="name.invalidPattern" value="类名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- 方法名检查 -->
		<module name="MethodName">
			<property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
			<message key="name.invalidPattern" value="方法名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- 常量名检查 -->
		<module name="ConstantName">
			<property name="format" value="^[A-Z][A-Z0-9]*(_[A-Z0-9]+)*$"/>
			<message key="name.invalidPattern" value="常量名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- 局部变量名检查 -->
		<module name="LocalVariableName">
			<property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
			<message key="name.invalidPattern" value="局部变量名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- 成员变量名检查 -->
		<module name="MemberName">
			<property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
			<message key="name.invalidPattern" value="成员变量名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- 参数名检查 -->
		<module name="ParameterName">
			<property name="format" value="^[a-z][a-zA-Z0-9]*$"/>
			<message key="name.invalidPattern" value="参数名 ''{0}'' 必须符合格式 ''{1}''"/>
		</module>

		<!-- ==================== 代码格式检查 ==================== -->
		
		<!-- 行长度检查 -->
		<module name="LineLength">
			<property name="max" value="150"/>
			<property name="ignorePattern" value="^package.*|^import.*|a href|href|http://|https://|ftp://"/>
		</module>

		<!-- 方法长度检查 -->
		<module name="MethodLength">
			<property name="max" value="150"/>
			<property name="countEmpty" value="false"/>
		</module>

		<!-- 参数数量检查 -->
		<module name="ParameterNumber">
			<property name="max" value="8"/>
			<property name="ignoreOverriddenMethods" value="true"/>
		</module>

		<!-- ==================== 导入检查 ==================== -->
		
		<!-- 禁止星号导入 -->
		<module name="AvoidStarImport">
			<property name="allowStaticMemberImports" value="true"/>
		</module>

		<!-- 禁止冗余导入 -->
		<module name="RedundantImport"/>

		<!-- 禁止未使用的导入 -->
		<module name="UnusedImports"/>

		<!-- ==================== 代码块检查 ==================== -->
		
		<!-- 空代码块检查 -->
		<module name="EmptyBlock">
			<property name="option" value="TEXT"/>
			<property name="tokens" value="LITERAL_TRY, LITERAL_FINALLY, LITERAL_IF, LITERAL_ELSE, LITERAL_SWITCH"/>
		</module>

		<!-- 左大括号位置 -->
		<module name="LeftCurly">
			<property name="option" value="eol"/>
		</module>

		<!-- 右大括号位置 -->
		<module name="RightCurly">
			<property name="option" value="same"/>
		</module>

		<!-- 需要大括号 -->
		<module name="NeedBraces">
			<property name="allowSingleLineStatement" value="true"/>
		</module>

		<!-- ==================== 其他检查 ==================== -->
		
		<!-- 修饰符顺序 -->
		<module name="ModifierOrder"/>

		<!-- 冗余修饰符 -->
		<module name="RedundantModifier"/>

		<!-- 简化布尔表达式 -->
		<module name="SimplifyBooleanExpression"/>

		<!-- 简化布尔返回 -->
		<module name="SimplifyBooleanReturn"/>

		<!-- 字符串比较 -->
		<module name="StringLiteralEquality"/>

		<!-- 嵌套 if 深度 -->
		<module name="NestedIfDepth">
			<property name="max" value="3"/>
		</module>

		<!-- 嵌套 try 深度 -->
		<module name="NestedTryDepth">
			<property name="max" value="2"/>
		</module>

		<!-- 抑制警告过滤器 -->
		<module name="SuppressionCommentFilter">
			<property name="offCommentFormat" value="CHECKSTYLE:OFF"/>
			<property name="onCommentFormat" value="CHECKSTYLE:ON"/>
		</module>

		<!-- 支持 @SuppressWarnings 注解 -->
		<module name="SuppressWarningsHolder"/>
	</module>

	<!-- 支持 @SuppressWarnings 注解 -->
	<module name="SuppressWarningsFilter"/>

	<!-- 抑制文件过滤器 -->
	<module name="SuppressionFilter">
		<property name="file" value="${checkstyle.suppressions.file}" default=""/>
		<property name="optional" value="true"/>
	</module>
</module>
